var ht=(()=>{var P=import.meta.url;return async function(D={}){var V,u=D,$,L,wr=new Promise((r,e)=>{$=r,L=e}),pr=typeof window=="object",q=typeof importScripts=="function",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(I){const{createRequire:r}=await Promise.resolve().then(function(){return wt});var nr=r(import.meta.url)}var Tr=Object.assign({},u),gr=[],or="./this.program",ar=(r,e)=>{throw e},R="";function ie(r){return u.locateFile?u.locateFile(r,R):R+r}var ir,Q;if(I){var yr=nr("fs"),Nr=nr("path");R=nr("url").fileURLToPath(new URL(""+new URL("index-DZxOwtnj.js",import.meta.url).href,import.meta.url)),Q=r=>{r=fr(r)?new URL(r):Nr.normalize(r);var e=yr.readFileSync(r);return e},ir=(r,e=!0)=>(r=fr(r)?new URL(r):Nr.normalize(r),new Promise((t,o)=>{yr.readFile(r,e?void 0:"utf8",(a,i)=>{a?o(a):t(e?i.buffer:i)})})),!u.thisProgram&&process.argv.length>1&&(or=process.argv[1].replace(/\\/g,"/")),gr=process.argv.slice(2),ar=(r,e)=>{throw process.exitCode=r,e}}else(pr||q)&&(q?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),P&&(R=P),R.startsWith("blob:")?R="":R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1),q&&(Q=r=>{var e=new XMLHttpRequest;return e.open("GET",r,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),ir=r=>fr(r)?new Promise((e,t)=>{var o=new XMLHttpRequest;o.open("GET",r,!0),o.responseType="arraybuffer",o.onload=()=>{(o.status==200||o.status==0&&o.response)&&t(o.response),e(o.status)},o.onerror=e,o.send(null)}):fetch(r,{credentials:"same-origin"}).then(e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url))));var Er=u.print||console.log.bind(console),x=u.printErr||console.error.bind(console);Object.assign(u,Tr),Tr=null,u.arguments&&(gr=u.arguments),u.thisProgram&&(or=u.thisProgram),u.quit&&(ar=u.quit);var Z;u.wasmBinary&&(Z=u.wasmBinary);var sr,_r=!1,lr,A,X,G,g,_,kr,br;function Cr(){var r=sr.buffer;u.HEAP8=A=new Int8Array(r),u.HEAP16=G=new Int16Array(r),u.HEAPU8=X=new Uint8Array(r),u.HEAPU16=new Uint16Array(r),u.HEAP32=g=new Int32Array(r),u.HEAPU32=_=new Uint32Array(r),u.HEAPF32=kr=new Float32Array(r),u.HEAPF64=br=new Float64Array(r)}var Ur=[],zr=[],se=[],Br=[];function le(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)de(u.preRun.shift());dr(Ur)}function ue(){!u.noFSInit&&!n.init.initialized&&n.init(),n.ignorePermissions=!1,dr(zr)}function fe(){dr(se)}function ce(){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)he(u.postRun.shift());dr(Br)}function de(r){Ur.unshift(r)}function ve(r){zr.unshift(r)}function he(r){Br.unshift(r)}var O=0,rr=null;function pt(r){return r}function Sr(r){var e;O++,(e=u.monitorRunDependencies)==null||e.call(u,O)}function ur(r){var t;if(O--,(t=u.monitorRunDependencies)==null||t.call(u,O),O==0&&rr){var e=rr;rr=null,e()}}function j(r){var t;(t=u.onAbort)==null||t.call(u,r),r="Aborted("+r+")",x(r),_r=!0,lr=1,r+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(r);throw L(e),e}var me="data:application/octet-stream;base64,",Lr=r=>r.startsWith(me),fr=r=>r.startsWith("file://");function we(){if(u.locateFile){var r="niimath.wasm";return Lr(r)?r:ie(r)}return new URL(""+new URL("niimath-s1cwWGoK.wasm",import.meta.url).href,import.meta.url).href}var cr;function xr(r){if(r==cr&&Z)return new Uint8Array(Z);if(Q)return Q(r);throw"both async and sync fetching of the wasm failed"}function pe(r){return Z?Promise.resolve().then(()=>xr(r)):ir(r).then(e=>new Uint8Array(e),()=>xr(r))}function jr(r,e,t){return pe(r).then(o=>WebAssembly.instantiate(o,e)).then(t,o=>{x(`failed to asynchronously prepare wasm: ${o}`),j(o)})}function ge(r,e,t,o){return!r&&typeof WebAssembly.instantiateStreaming=="function"&&!Lr(e)&&!fr(e)&&!I&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(a=>{var i=WebAssembly.instantiateStreaming(a,t);return i.then(o,function(s){return x(`wasm streaming compile failed: ${s}`),x("falling back to ArrayBuffer instantiation"),jr(e,t,o)})}):jr(e,t,o)}function ye(){return{a:vt}}function Ee(){var r=ye();function e(o,a){return C=o.exports,sr=C.r,Cr(),ve(C.s),ur(),C}Sr();function t(o){e(o.instance)}if(u.instantiateWasm)try{return u.instantiateWasm(r,e)}catch(o){x(`Module.instantiateWasm callback failed with error: ${o}`),L(o)}return cr||(cr=we()),ge(Z,cr,r,t).catch(L),{}}var m,k;function Ir(r){this.name="ExitStatus",this.message=`Program terminated with exit(${r})`,this.status=r}var dr=r=>{for(;r.length>0;)r.shift()(u)},_e=()=>te(),ke=r=>re(r),vr=r=>{for(var e=0,t=0;t<r.length;++t){var o=r.charCodeAt(t);o<=127?e++:o<=2047?e+=2:o>=55296&&o<=57343?(e+=4,++t):e+=3}return e},Fr=(r,e,t,o)=>{if(!(o>0))return 0;for(var a=t,i=t+o-1,s=0;s<r.length;++s){var l=r.charCodeAt(s);if(l>=55296&&l<=57343){var f=r.charCodeAt(++s);l=65536+((l&1023)<<10)|f&1023}if(l<=127){if(t>=i)break;e[t++]=l}else if(l<=2047){if(t+1>=i)break;e[t++]=192|l>>6,e[t++]=128|l&63}else if(l<=65535){if(t+2>=i)break;e[t++]=224|l>>12,e[t++]=128|l>>6&63,e[t++]=128|l&63}else{if(t+3>=i)break;e[t++]=240|l>>18,e[t++]=128|l>>12&63,e[t++]=128|l>>6&63,e[t++]=128|l&63}}return e[t]=0,t-a},Ar=(r,e,t)=>Fr(r,X,e,t),Pr=r=>ee(r),Or=r=>{var e=vr(r)+1,t=Pr(e);return Ar(r,t,e),t},Hr=typeof TextDecoder<"u"?new TextDecoder:void 0,K=(r,e,t)=>{for(var o=e+t,a=e;r[a]&&!(a>=o);)++a;if(a-e>16&&r.buffer&&Hr)return Hr.decode(r.subarray(e,a));for(var i="";e<a;){var s=r[e++];if(!(s&128)){i+=String.fromCharCode(s);continue}var l=r[e++]&63;if((s&224)==192){i+=String.fromCharCode((s&31)<<6|l);continue}var f=r[e++]&63;if((s&240)==224?s=(s&15)<<12|l<<6|f:s=(s&7)<<18|l<<12|f<<6|r[e++]&63,s<65536)i+=String.fromCharCode(s);else{var v=s-65536;i+=String.fromCharCode(55296|v>>10,56320|v&1023)}}return i},Wr=(r,e)=>r?K(X,r,e):"";function be(r,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return A[r];case"i8":return A[r];case"i16":return G[r>>1];case"i32":return g[r>>2];case"i64":j("to do getValue(i64) use WASM_BIGINT");case"float":return kr[r>>2];case"double":return br[r>>3];case"*":return _[r>>2];default:j(`invalid type for getValue: ${e}`)}}var Se=u.noExitRuntime||!0;function Fe(r,e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":A[r]=e;break;case"i8":A[r]=e;break;case"i16":G[r>>1]=e;break;case"i32":g[r>>2]=e;break;case"i64":j("to do setValue(i64) use WASM_BIGINT");case"float":kr[r>>2]=e;break;case"double":br[r>>3]=e;break;case"*":_[r>>2]=e;break;default:j(`invalid type for setValue: ${t}`)}}var E={isAbs:r=>r.charAt(0)==="/",splitPath:r=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return e.exec(r).slice(1)},normalizeArray:(r,e)=>{for(var t=0,o=r.length-1;o>=0;o--){var a=r[o];a==="."?r.splice(o,1):a===".."?(r.splice(o,1),t++):t&&(r.splice(o,1),t--)}if(e)for(;t;t--)r.unshift("..");return r},normalize:r=>{var e=E.isAbs(r),t=r.substr(-1)==="/";return r=E.normalizeArray(r.split("/").filter(o=>!!o),!e).join("/"),!r&&!e&&(r="."),r&&t&&(r+="/"),(e?"/":"")+r},dirname:r=>{var e=E.splitPath(r),t=e[0],o=e[1];return!t&&!o?".":(o&&(o=o.substr(0,o.length-1)),t+o)},basename:r=>{if(r==="/")return"/";r=E.normalize(r),r=r.replace(/\/$/,"");var e=r.lastIndexOf("/");return e===-1?r:r.substr(e+1)},join:(...r)=>E.normalize(r.join("/")),join2:(r,e)=>E.normalize(r+"/"+e)},Ae=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return o=>crypto.getRandomValues(o);if(I)try{var r=nr("crypto"),e=r.randomFillSync;if(e)return o=>r.randomFillSync(o);var t=r.randomBytes;return o=>(o.set(t(o.byteLength)),o)}catch{}j("initRandomDevice")},Vr=r=>(Vr=Ae())(r),z={resolve:(...r)=>{for(var e="",t=!1,o=r.length-1;o>=-1&&!t;o--){var a=o>=0?r[o]:n.cwd();if(typeof a!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!a)return"";e=a+"/"+e,t=E.isAbs(a)}return e=E.normalizeArray(e.split("/").filter(i=>!!i),!t).join("/"),(t?"/":"")+e||"."},relative:(r,e)=>{r=z.resolve(r).substr(1),e=z.resolve(e).substr(1);function t(v){for(var w=0;w<v.length&&v[w]==="";w++);for(var y=v.length-1;y>=0&&v[y]==="";y--);return w>y?[]:v.slice(w,y-w+1)}for(var o=t(r.split("/")),a=t(e.split("/")),i=Math.min(o.length,a.length),s=i,l=0;l<i;l++)if(o[l]!==a[l]){s=l;break}for(var f=[],l=s;l<o.length;l++)f.push("..");return f=f.concat(a.slice(s)),f.join("/")}},Dr=[];function $r(r,e,t){var o=vr(r)+1,a=new Array(o),i=Fr(r,a,0,a.length);return a.length=i,a}var Pe=()=>{if(!Dr.length){var r=null;if(I){var e=256,t=Buffer.alloc(e),o=0,a=process.stdin.fd;try{o=yr.readSync(a,t,0,e)}catch(i){if(i.toString().includes("EOF"))o=0;else throw i}o>0&&(r=t.slice(0,o).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(r=window.prompt("Input: "),r!==null&&(r+=`
`));if(!r)return null;Dr=$r(r)}return Dr.shift()},H={ttys:[],init(){},shutdown(){},register(r,e){H.ttys[r]={input:[],output:[],ops:e},n.registerDevice(r,H.stream_ops)},stream_ops:{open(r){var e=H.ttys[r.node.rdev];if(!e)throw new n.ErrnoError(43);r.tty=e,r.seekable=!1},close(r){r.tty.ops.fsync(r.tty)},fsync(r){r.tty.ops.fsync(r.tty)},read(r,e,t,o,a){if(!r.tty||!r.tty.ops.get_char)throw new n.ErrnoError(60);for(var i=0,s=0;s<o;s++){var l;try{l=r.tty.ops.get_char(r.tty)}catch{throw new n.ErrnoError(29)}if(l===void 0&&i===0)throw new n.ErrnoError(6);if(l==null)break;i++,e[t+s]=l}return i&&(r.node.timestamp=Date.now()),i},write(r,e,t,o,a){if(!r.tty||!r.tty.ops.put_char)throw new n.ErrnoError(60);try{for(var i=0;i<o;i++)r.tty.ops.put_char(r.tty,e[t+i])}catch{throw new n.ErrnoError(29)}return o&&(r.node.timestamp=Date.now()),i}},default_tty_ops:{get_char(r){return Pe()},put_char(r,e){e===null||e===10?(Er(K(r.output,0)),r.output=[]):e!=0&&r.output.push(e)},fsync(r){r.output&&r.output.length>0&&(Er(K(r.output,0)),r.output=[])},ioctl_tcgets(r){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(r,e,t){return 0},ioctl_tiocgwinsz(r){return[24,80]}},default_tty1_ops:{put_char(r,e){e===null||e===10?(x(K(r.output,0)),r.output=[]):e!=0&&r.output.push(e)},fsync(r){r.output&&r.output.length>0&&(x(K(r.output,0)),r.output=[])}}},qr=r=>{j()},h={ops_table:null,mount(r){return h.createNode(null,"/",16895,0)},createNode(r,e,t,o){if(n.isBlkdev(t)||n.isFIFO(t))throw new n.ErrnoError(63);h.ops_table||(h.ops_table={dir:{node:{getattr:h.node_ops.getattr,setattr:h.node_ops.setattr,lookup:h.node_ops.lookup,mknod:h.node_ops.mknod,rename:h.node_ops.rename,unlink:h.node_ops.unlink,rmdir:h.node_ops.rmdir,readdir:h.node_ops.readdir,symlink:h.node_ops.symlink},stream:{llseek:h.stream_ops.llseek}},file:{node:{getattr:h.node_ops.getattr,setattr:h.node_ops.setattr},stream:{llseek:h.stream_ops.llseek,read:h.stream_ops.read,write:h.stream_ops.write,allocate:h.stream_ops.allocate,mmap:h.stream_ops.mmap,msync:h.stream_ops.msync}},link:{node:{getattr:h.node_ops.getattr,setattr:h.node_ops.setattr,readlink:h.node_ops.readlink},stream:{}},chrdev:{node:{getattr:h.node_ops.getattr,setattr:h.node_ops.setattr},stream:n.chrdev_stream_ops}});var a=n.createNode(r,e,t,o);return n.isDir(a.mode)?(a.node_ops=h.ops_table.dir.node,a.stream_ops=h.ops_table.dir.stream,a.contents={}):n.isFile(a.mode)?(a.node_ops=h.ops_table.file.node,a.stream_ops=h.ops_table.file.stream,a.usedBytes=0,a.contents=null):n.isLink(a.mode)?(a.node_ops=h.ops_table.link.node,a.stream_ops=h.ops_table.link.stream):n.isChrdev(a.mode)&&(a.node_ops=h.ops_table.chrdev.node,a.stream_ops=h.ops_table.chrdev.stream),a.timestamp=Date.now(),r&&(r.contents[e]=a,r.timestamp=a.timestamp),a},getFileDataAsTypedArray(r){return r.contents?r.contents.subarray?r.contents.subarray(0,r.usedBytes):new Uint8Array(r.contents):new Uint8Array(0)},expandFileStorage(r,e){var t=r.contents?r.contents.length:0;if(!(t>=e)){var o=1024*1024;e=Math.max(e,t*(t<o?2:1.125)>>>0),t!=0&&(e=Math.max(e,256));var a=r.contents;r.contents=new Uint8Array(e),r.usedBytes>0&&r.contents.set(a.subarray(0,r.usedBytes),0)}},resizeFileStorage(r,e){if(r.usedBytes!=e)if(e==0)r.contents=null,r.usedBytes=0;else{var t=r.contents;r.contents=new Uint8Array(e),t&&r.contents.set(t.subarray(0,Math.min(e,r.usedBytes))),r.usedBytes=e}},node_ops:{getattr(r){var e={};return e.dev=n.isChrdev(r.mode)?r.id:1,e.ino=r.id,e.mode=r.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=r.rdev,n.isDir(r.mode)?e.size=4096:n.isFile(r.mode)?e.size=r.usedBytes:n.isLink(r.mode)?e.size=r.link.length:e.size=0,e.atime=new Date(r.timestamp),e.mtime=new Date(r.timestamp),e.ctime=new Date(r.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr(r,e){e.mode!==void 0&&(r.mode=e.mode),e.timestamp!==void 0&&(r.timestamp=e.timestamp),e.size!==void 0&&h.resizeFileStorage(r,e.size)},lookup(r,e){throw n.genericErrors[44]},mknod(r,e,t,o){return h.createNode(r,e,t,o)},rename(r,e,t){if(n.isDir(r.mode)){var o;try{o=n.lookupNode(e,t)}catch{}if(o)for(var a in o.contents)throw new n.ErrnoError(55)}delete r.parent.contents[r.name],r.parent.timestamp=Date.now(),r.name=t,e.contents[t]=r,e.timestamp=r.parent.timestamp},unlink(r,e){delete r.contents[e],r.timestamp=Date.now()},rmdir(r,e){var t=n.lookupNode(r,e);for(var o in t.contents)throw new n.ErrnoError(55);delete r.contents[e],r.timestamp=Date.now()},readdir(r){var e=[".",".."];for(var t of Object.keys(r.contents))e.push(t);return e},symlink(r,e,t){var o=h.createNode(r,e,41471,0);return o.link=t,o},readlink(r){if(!n.isLink(r.mode))throw new n.ErrnoError(28);return r.link}},stream_ops:{read(r,e,t,o,a){var i=r.node.contents;if(a>=r.node.usedBytes)return 0;var s=Math.min(r.node.usedBytes-a,o);if(s>8&&i.subarray)e.set(i.subarray(a,a+s),t);else for(var l=0;l<s;l++)e[t+l]=i[a+l];return s},write(r,e,t,o,a,i){if(e.buffer===A.buffer&&(i=!1),!o)return 0;var s=r.node;if(s.timestamp=Date.now(),e.subarray&&(!s.contents||s.contents.subarray)){if(i)return s.contents=e.subarray(t,t+o),s.usedBytes=o,o;if(s.usedBytes===0&&a===0)return s.contents=e.slice(t,t+o),s.usedBytes=o,o;if(a+o<=s.usedBytes)return s.contents.set(e.subarray(t,t+o),a),o}if(h.expandFileStorage(s,a+o),s.contents.subarray&&e.subarray)s.contents.set(e.subarray(t,t+o),a);else for(var l=0;l<o;l++)s.contents[a+l]=e[t+l];return s.usedBytes=Math.max(s.usedBytes,a+o),o},llseek(r,e,t){var o=e;if(t===1?o+=r.position:t===2&&n.isFile(r.node.mode)&&(o+=r.node.usedBytes),o<0)throw new n.ErrnoError(28);return o},allocate(r,e,t){h.expandFileStorage(r.node,e+t),r.node.usedBytes=Math.max(r.node.usedBytes,e+t)},mmap(r,e,t,o,a){if(!n.isFile(r.node.mode))throw new n.ErrnoError(43);var i,s,l=r.node.contents;if(!(a&2)&&l.buffer===A.buffer)s=!1,i=l.byteOffset;else{if((t>0||t+e<l.length)&&(l.subarray?l=l.subarray(t,t+e):l=Array.prototype.slice.call(l,t,t+e)),s=!0,i=qr(),!i)throw new n.ErrnoError(48);A.set(l,i)}return{ptr:i,allocated:s}},msync(r,e,t,o,a){return h.stream_ops.write(r,e,0,o,t,!1),0}}},De=(r,e,t,o)=>{var a=`al ${r}`;ir(r).then(i=>{e(new Uint8Array(i)),a&&ur()},i=>{if(t)t();else throw`Loading data file "${r}" failed.`}),a&&Sr()},Xr=(r,e,t,o,a,i)=>{n.createDataFile(r,e,t,o,a,i)},Re=u.preloadPlugins||[],Me=(r,e,t,o)=>{typeof Browser<"u"&&Browser.init();var a=!1;return Re.forEach(i=>{a||i.canHandle(e)&&(i.handle(r,e,t,o),a=!0)}),a},Te=(r,e,t,o,a,i,s,l,f,v)=>{var w=e?z.resolve(E.join2(r,e)):r;function y(p){function c(d){v==null||v(),l||Xr(r,e,d,o,a,f),i==null||i(),ur()}Me(p,w,c,()=>{s==null||s(),ur()})||c(p)}Sr(),typeof t=="string"?De(t,y,s):y(t)},Ne=r=>{var e={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},t=e[r];if(typeof t>"u")throw new Error(`Unknown file open mode: ${r}`);return t},Rr=(r,e)=>{var t=0;return r&&(t|=365),e&&(t|=146),t},n={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(r){this.name="ErrnoError",this.errno=r}},genericErrors:{},filesystems:null,syncFSRequests:0,FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(r){this.node=r}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(r){this.shared.flags=r}get position(){return this.shared.position}set position(r){this.shared.position=r}},FSNode:class{constructor(r,e,t,o){r||(r=this),this.parent=r,this.mount=r.mount,this.mounted=null,this.id=n.nextInode++,this.name=e,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=o,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(r){r?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(r){r?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return n.isDir(this.mode)}get isDevice(){return n.isChrdev(this.mode)}},lookupPath(r,e={}){if(r=z.resolve(r),!r)return{path:"",node:null};var t={follow_mount:!0,recurse_count:0};if(e=Object.assign(t,e),e.recurse_count>8)throw new n.ErrnoError(32);for(var o=r.split("/").filter(y=>!!y),a=n.root,i="/",s=0;s<o.length;s++){var l=s===o.length-1;if(l&&e.parent)break;if(a=n.lookupNode(a,o[s]),i=E.join2(i,o[s]),n.isMountpoint(a)&&(!l||l&&e.follow_mount)&&(a=a.mounted.root),!l||e.follow)for(var f=0;n.isLink(a.mode);){var v=n.readlink(i);i=z.resolve(E.dirname(i),v);var w=n.lookupPath(i,{recurse_count:e.recurse_count+1});if(a=w.node,f++>40)throw new n.ErrnoError(32)}}return{path:i,node:a}},getPath(r){for(var e;;){if(n.isRoot(r)){var t=r.mount.mountpoint;return e?t[t.length-1]!=="/"?`${t}/${e}`:t+e:t}e=e?`${r.name}/${e}`:r.name,r=r.parent}},hashName(r,e){for(var t=0,o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o)|0;return(r+t>>>0)%n.nameTable.length},hashAddNode(r){var e=n.hashName(r.parent.id,r.name);r.name_next=n.nameTable[e],n.nameTable[e]=r},hashRemoveNode(r){var e=n.hashName(r.parent.id,r.name);if(n.nameTable[e]===r)n.nameTable[e]=r.name_next;else for(var t=n.nameTable[e];t;){if(t.name_next===r){t.name_next=r.name_next;break}t=t.name_next}},lookupNode(r,e){var t=n.mayLookup(r);if(t)throw new n.ErrnoError(t);for(var o=n.hashName(r.id,e),a=n.nameTable[o];a;a=a.name_next){var i=a.name;if(a.parent.id===r.id&&i===e)return a}return n.lookup(r,e)},createNode(r,e,t,o){var a=new n.FSNode(r,e,t,o);return n.hashAddNode(a),a},destroyNode(r){n.hashRemoveNode(r)},isRoot(r){return r===r.parent},isMountpoint(r){return!!r.mounted},isFile(r){return(r&61440)===32768},isDir(r){return(r&61440)===16384},isLink(r){return(r&61440)===40960},isChrdev(r){return(r&61440)===8192},isBlkdev(r){return(r&61440)===24576},isFIFO(r){return(r&61440)===4096},isSocket(r){return(r&49152)===49152},flagsToPermissionString(r){var e=["r","w","rw"][r&3];return r&512&&(e+="w"),e},nodePermissions(r,e){return n.ignorePermissions?0:e.includes("r")&&!(r.mode&292)||e.includes("w")&&!(r.mode&146)||e.includes("x")&&!(r.mode&73)?2:0},mayLookup(r){if(!n.isDir(r.mode))return 54;var e=n.nodePermissions(r,"x");return e||(r.node_ops.lookup?0:2)},mayCreate(r,e){try{var t=n.lookupNode(r,e);return 20}catch{}return n.nodePermissions(r,"wx")},mayDelete(r,e,t){var o;try{o=n.lookupNode(r,e)}catch(i){return i.errno}var a=n.nodePermissions(r,"wx");if(a)return a;if(t){if(!n.isDir(o.mode))return 54;if(n.isRoot(o)||n.getPath(o)===n.cwd())return 10}else if(n.isDir(o.mode))return 31;return 0},mayOpen(r,e){return r?n.isLink(r.mode)?32:n.isDir(r.mode)&&(n.flagsToPermissionString(e)!=="r"||e&512)?31:n.nodePermissions(r,n.flagsToPermissionString(e)):44},MAX_OPEN_FDS:4096,nextfd(){for(var r=0;r<=n.MAX_OPEN_FDS;r++)if(!n.streams[r])return r;throw new n.ErrnoError(33)},getStreamChecked(r){var e=n.getStream(r);if(!e)throw new n.ErrnoError(8);return e},getStream:r=>n.streams[r],createStream(r,e=-1){return r=Object.assign(new n.FSStream,r),e==-1&&(e=n.nextfd()),r.fd=e,n.streams[e]=r,r},closeStream(r){n.streams[r]=null},dupStream(r,e=-1){var o,a;var t=n.createStream(r,e);return(a=(o=t.stream_ops)==null?void 0:o.dup)==null||a.call(o,t),t},chrdev_stream_ops:{open(r){var t,o;var e=n.getDevice(r.node.rdev);r.stream_ops=e.stream_ops,(o=(t=r.stream_ops).open)==null||o.call(t,r)},llseek(){throw new n.ErrnoError(70)}},major:r=>r>>8,minor:r=>r&255,makedev:(r,e)=>r<<8|e,registerDevice(r,e){n.devices[r]={stream_ops:e}},getDevice:r=>n.devices[r],getMounts(r){for(var e=[],t=[r];t.length;){var o=t.pop();e.push(o),t.push(...o.mounts)}return e},syncfs(r,e){typeof r=="function"&&(e=r,r=!1),n.syncFSRequests++,n.syncFSRequests>1&&x(`warning: ${n.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=n.getMounts(n.root.mount),o=0;function a(s){return n.syncFSRequests--,e(s)}function i(s){if(s)return i.errored?void 0:(i.errored=!0,a(s));++o>=t.length&&a(null)}t.forEach(s=>{if(!s.type.syncfs)return i(null);s.type.syncfs(s,r,i)})},mount(r,e,t){var o=t==="/",a=!t,i;if(o&&n.root)throw new n.ErrnoError(10);if(!o&&!a){var s=n.lookupPath(t,{follow_mount:!1});if(t=s.path,i=s.node,n.isMountpoint(i))throw new n.ErrnoError(10);if(!n.isDir(i.mode))throw new n.ErrnoError(54)}var l={type:r,opts:e,mountpoint:t,mounts:[]},f=r.mount(l);return f.mount=l,l.root=f,o?n.root=f:i&&(i.mounted=l,i.mount&&i.mount.mounts.push(l)),f},unmount(r){var e=n.lookupPath(r,{follow_mount:!1});if(!n.isMountpoint(e.node))throw new n.ErrnoError(28);var t=e.node,o=t.mounted,a=n.getMounts(o);Object.keys(n.nameTable).forEach(s=>{for(var l=n.nameTable[s];l;){var f=l.name_next;a.includes(l.mount)&&n.destroyNode(l),l=f}}),t.mounted=null;var i=t.mount.mounts.indexOf(o);t.mount.mounts.splice(i,1)},lookup(r,e){return r.node_ops.lookup(r,e)},mknod(r,e,t){var o=n.lookupPath(r,{parent:!0}),a=o.node,i=E.basename(r);if(!i||i==="."||i==="..")throw new n.ErrnoError(28);var s=n.mayCreate(a,i);if(s)throw new n.ErrnoError(s);if(!a.node_ops.mknod)throw new n.ErrnoError(63);return a.node_ops.mknod(a,i,e,t)},create(r,e){return e=e!==void 0?e:438,e&=4095,e|=32768,n.mknod(r,e,0)},mkdir(r,e){return e=e!==void 0?e:511,e&=1023,e|=16384,n.mknod(r,e,0)},mkdirTree(r,e){for(var t=r.split("/"),o="",a=0;a<t.length;++a)if(t[a]){o+="/"+t[a];try{n.mkdir(o,e)}catch(i){if(i.errno!=20)throw i}}},mkdev(r,e,t){return typeof t>"u"&&(t=e,e=438),e|=8192,n.mknod(r,e,t)},symlink(r,e){if(!z.resolve(r))throw new n.ErrnoError(44);var t=n.lookupPath(e,{parent:!0}),o=t.node;if(!o)throw new n.ErrnoError(44);var a=E.basename(e),i=n.mayCreate(o,a);if(i)throw new n.ErrnoError(i);if(!o.node_ops.symlink)throw new n.ErrnoError(63);return o.node_ops.symlink(o,a,r)},rename(r,e){var t=E.dirname(r),o=E.dirname(e),a=E.basename(r),i=E.basename(e),s,l,f;if(s=n.lookupPath(r,{parent:!0}),l=s.node,s=n.lookupPath(e,{parent:!0}),f=s.node,!l||!f)throw new n.ErrnoError(44);if(l.mount!==f.mount)throw new n.ErrnoError(75);var v=n.lookupNode(l,a),w=z.relative(r,o);if(w.charAt(0)!==".")throw new n.ErrnoError(28);if(w=z.relative(e,t),w.charAt(0)!==".")throw new n.ErrnoError(55);var y;try{y=n.lookupNode(f,i)}catch{}if(v!==y){var p=n.isDir(v.mode),c=n.mayDelete(l,a,p);if(c)throw new n.ErrnoError(c);if(c=y?n.mayDelete(f,i,p):n.mayCreate(f,i),c)throw new n.ErrnoError(c);if(!l.node_ops.rename)throw new n.ErrnoError(63);if(n.isMountpoint(v)||y&&n.isMountpoint(y))throw new n.ErrnoError(10);if(f!==l&&(c=n.nodePermissions(l,"w"),c))throw new n.ErrnoError(c);n.hashRemoveNode(v);try{l.node_ops.rename(v,f,i),v.parent=f}catch(d){throw d}finally{n.hashAddNode(v)}}},rmdir(r){var e=n.lookupPath(r,{parent:!0}),t=e.node,o=E.basename(r),a=n.lookupNode(t,o),i=n.mayDelete(t,o,!0);if(i)throw new n.ErrnoError(i);if(!t.node_ops.rmdir)throw new n.ErrnoError(63);if(n.isMountpoint(a))throw new n.ErrnoError(10);t.node_ops.rmdir(t,o),n.destroyNode(a)},readdir(r){var e=n.lookupPath(r,{follow:!0}),t=e.node;if(!t.node_ops.readdir)throw new n.ErrnoError(54);return t.node_ops.readdir(t)},unlink(r){var e=n.lookupPath(r,{parent:!0}),t=e.node;if(!t)throw new n.ErrnoError(44);var o=E.basename(r),a=n.lookupNode(t,o),i=n.mayDelete(t,o,!1);if(i)throw new n.ErrnoError(i);if(!t.node_ops.unlink)throw new n.ErrnoError(63);if(n.isMountpoint(a))throw new n.ErrnoError(10);t.node_ops.unlink(t,o),n.destroyNode(a)},readlink(r){var e=n.lookupPath(r),t=e.node;if(!t)throw new n.ErrnoError(44);if(!t.node_ops.readlink)throw new n.ErrnoError(28);return z.resolve(n.getPath(t.parent),t.node_ops.readlink(t))},stat(r,e){var t=n.lookupPath(r,{follow:!e}),o=t.node;if(!o)throw new n.ErrnoError(44);if(!o.node_ops.getattr)throw new n.ErrnoError(63);return o.node_ops.getattr(o)},lstat(r){return n.stat(r,!0)},chmod(r,e,t){var o;if(typeof r=="string"){var a=n.lookupPath(r,{follow:!t});o=a.node}else o=r;if(!o.node_ops.setattr)throw new n.ErrnoError(63);o.node_ops.setattr(o,{mode:e&4095|o.mode&-4096,timestamp:Date.now()})},lchmod(r,e){n.chmod(r,e,!0)},fchmod(r,e){var t=n.getStreamChecked(r);n.chmod(t.node,e)},chown(r,e,t,o){var a;if(typeof r=="string"){var i=n.lookupPath(r,{follow:!o});a=i.node}else a=r;if(!a.node_ops.setattr)throw new n.ErrnoError(63);a.node_ops.setattr(a,{timestamp:Date.now()})},lchown(r,e,t){n.chown(r,e,t,!0)},fchown(r,e,t){var o=n.getStreamChecked(r);n.chown(o.node,e,t)},truncate(r,e){if(e<0)throw new n.ErrnoError(28);var t;if(typeof r=="string"){var o=n.lookupPath(r,{follow:!0});t=o.node}else t=r;if(!t.node_ops.setattr)throw new n.ErrnoError(63);if(n.isDir(t.mode))throw new n.ErrnoError(31);if(!n.isFile(t.mode))throw new n.ErrnoError(28);var a=n.nodePermissions(t,"w");if(a)throw new n.ErrnoError(a);t.node_ops.setattr(t,{size:e,timestamp:Date.now()})},ftruncate(r,e){var t=n.getStreamChecked(r);if(!(t.flags&2097155))throw new n.ErrnoError(28);n.truncate(t.node,e)},utime(r,e,t){var o=n.lookupPath(r,{follow:!0}),a=o.node;a.node_ops.setattr(a,{timestamp:Math.max(e,t)})},open(r,e,t){if(r==="")throw new n.ErrnoError(44);e=typeof e=="string"?Ne(e):e,e&64?(t=typeof t>"u"?438:t,t=t&4095|32768):t=0;var o;if(typeof r=="object")o=r;else{r=E.normalize(r);try{var a=n.lookupPath(r,{follow:!(e&131072)});o=a.node}catch{}}var i=!1;if(e&64)if(o){if(e&128)throw new n.ErrnoError(20)}else o=n.mknod(r,t,0),i=!0;if(!o)throw new n.ErrnoError(44);if(n.isChrdev(o.mode)&&(e&=-513),e&65536&&!n.isDir(o.mode))throw new n.ErrnoError(54);if(!i){var s=n.mayOpen(o,e);if(s)throw new n.ErrnoError(s)}e&512&&!i&&n.truncate(o,0),e&=-131713;var l=n.createStream({node:o,path:n.getPath(o),flags:e,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1});return l.stream_ops.open&&l.stream_ops.open(l),u.logReadFiles&&!(e&1)&&(n.readFiles||(n.readFiles={}),r in n.readFiles||(n.readFiles[r]=1)),l},close(r){if(n.isClosed(r))throw new n.ErrnoError(8);r.getdents&&(r.getdents=null);try{r.stream_ops.close&&r.stream_ops.close(r)}catch(e){throw e}finally{n.closeStream(r.fd)}r.fd=null},isClosed(r){return r.fd===null},llseek(r,e,t){if(n.isClosed(r))throw new n.ErrnoError(8);if(!r.seekable||!r.stream_ops.llseek)throw new n.ErrnoError(70);if(t!=0&&t!=1&&t!=2)throw new n.ErrnoError(28);return r.position=r.stream_ops.llseek(r,e,t),r.ungotten=[],r.position},read(r,e,t,o,a){if(o<0||a<0)throw new n.ErrnoError(28);if(n.isClosed(r))throw new n.ErrnoError(8);if((r.flags&2097155)===1)throw new n.ErrnoError(8);if(n.isDir(r.node.mode))throw new n.ErrnoError(31);if(!r.stream_ops.read)throw new n.ErrnoError(28);var i=typeof a<"u";if(!i)a=r.position;else if(!r.seekable)throw new n.ErrnoError(70);var s=r.stream_ops.read(r,e,t,o,a);return i||(r.position+=s),s},write(r,e,t,o,a,i){if(o<0||a<0)throw new n.ErrnoError(28);if(n.isClosed(r))throw new n.ErrnoError(8);if(!(r.flags&2097155))throw new n.ErrnoError(8);if(n.isDir(r.node.mode))throw new n.ErrnoError(31);if(!r.stream_ops.write)throw new n.ErrnoError(28);r.seekable&&r.flags&1024&&n.llseek(r,0,2);var s=typeof a<"u";if(!s)a=r.position;else if(!r.seekable)throw new n.ErrnoError(70);var l=r.stream_ops.write(r,e,t,o,a,i);return s||(r.position+=l),l},allocate(r,e,t){if(n.isClosed(r))throw new n.ErrnoError(8);if(e<0||t<=0)throw new n.ErrnoError(28);if(!(r.flags&2097155))throw new n.ErrnoError(8);if(!n.isFile(r.node.mode)&&!n.isDir(r.node.mode))throw new n.ErrnoError(43);if(!r.stream_ops.allocate)throw new n.ErrnoError(138);r.stream_ops.allocate(r,e,t)},mmap(r,e,t,o,a){if(o&2&&!(a&2)&&(r.flags&2097155)!==2)throw new n.ErrnoError(2);if((r.flags&2097155)===1)throw new n.ErrnoError(2);if(!r.stream_ops.mmap)throw new n.ErrnoError(43);return r.stream_ops.mmap(r,e,t,o,a)},msync(r,e,t,o,a){return r.stream_ops.msync?r.stream_ops.msync(r,e,t,o,a):0},ioctl(r,e,t){if(!r.stream_ops.ioctl)throw new n.ErrnoError(59);return r.stream_ops.ioctl(r,e,t)},readFile(r,e={}){if(e.flags=e.flags||0,e.encoding=e.encoding||"binary",e.encoding!=="utf8"&&e.encoding!=="binary")throw new Error(`Invalid encoding type "${e.encoding}"`);var t,o=n.open(r,e.flags),a=n.stat(r),i=a.size,s=new Uint8Array(i);return n.read(o,s,0,i,0),e.encoding==="utf8"?t=K(s,0):e.encoding==="binary"&&(t=s),n.close(o),t},writeFile(r,e,t={}){t.flags=t.flags||577;var o=n.open(r,t.flags,t.mode);if(typeof e=="string"){var a=new Uint8Array(vr(e)+1),i=Fr(e,a,0,a.length);n.write(o,a,0,i,void 0,t.canOwn)}else if(ArrayBuffer.isView(e))n.write(o,e,0,e.byteLength,void 0,t.canOwn);else throw new Error("Unsupported data type");n.close(o)},cwd:()=>n.currentPath,chdir(r){var e=n.lookupPath(r,{follow:!0});if(e.node===null)throw new n.ErrnoError(44);if(!n.isDir(e.node.mode))throw new n.ErrnoError(54);var t=n.nodePermissions(e.node,"x");if(t)throw new n.ErrnoError(t);n.currentPath=e.path},createDefaultDirectories(){n.mkdir("/tmp"),n.mkdir("/home"),n.mkdir("/home/web_user")},createDefaultDevices(){n.mkdir("/dev"),n.registerDevice(n.makedev(1,3),{read:()=>0,write:(o,a,i,s,l)=>s}),n.mkdev("/dev/null",n.makedev(1,3)),H.register(n.makedev(5,0),H.default_tty_ops),H.register(n.makedev(6,0),H.default_tty1_ops),n.mkdev("/dev/tty",n.makedev(5,0)),n.mkdev("/dev/tty1",n.makedev(6,0));var r=new Uint8Array(1024),e=0,t=()=>(e===0&&(e=Vr(r).byteLength),r[--e]);n.createDevice("/dev","random",t),n.createDevice("/dev","urandom",t),n.mkdir("/dev/shm"),n.mkdir("/dev/shm/tmp")},createSpecialDirectories(){n.mkdir("/proc");var r=n.mkdir("/proc/self");n.mkdir("/proc/self/fd"),n.mount({mount(){var e=n.createNode(r,"fd",16895,73);return e.node_ops={lookup(t,o){var a=+o,i=n.getStreamChecked(a),s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path}};return s.parent=s,s}},e}},{},"/proc/self/fd")},createStandardStreams(){u.stdin?n.createDevice("/dev","stdin",u.stdin):n.symlink("/dev/tty","/dev/stdin"),u.stdout?n.createDevice("/dev","stdout",null,u.stdout):n.symlink("/dev/tty","/dev/stdout"),u.stderr?n.createDevice("/dev","stderr",null,u.stderr):n.symlink("/dev/tty1","/dev/stderr"),n.open("/dev/stdin",0),n.open("/dev/stdout",1),n.open("/dev/stderr",1)},staticInit(){[44].forEach(r=>{n.genericErrors[r]=new n.ErrnoError(r),n.genericErrors[r].stack="<generic error, no stack>"}),n.nameTable=new Array(4096),n.mount(h,{},"/"),n.createDefaultDirectories(),n.createDefaultDevices(),n.createSpecialDirectories(),n.filesystems={MEMFS:h}},init(r,e,t){n.init.initialized=!0,u.stdin=r||u.stdin,u.stdout=e||u.stdout,u.stderr=t||u.stderr,n.createStandardStreams()},quit(){n.init.initialized=!1;for(var r=0;r<n.streams.length;r++){var e=n.streams[r];e&&n.close(e)}},findObject(r,e){var t=n.analyzePath(r,e);return t.exists?t.object:null},analyzePath(r,e){try{var t=n.lookupPath(r,{follow:!e});r=t.path}catch{}var o={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=n.lookupPath(r,{parent:!0});o.parentExists=!0,o.parentPath=t.path,o.parentObject=t.node,o.name=E.basename(r),t=n.lookupPath(r,{follow:!e}),o.exists=!0,o.path=t.path,o.object=t.node,o.name=t.node.name,o.isRoot=t.path==="/"}catch(a){o.error=a.errno}return o},createPath(r,e,t,o){r=typeof r=="string"?r:n.getPath(r);for(var a=e.split("/").reverse();a.length;){var i=a.pop();if(i){var s=E.join2(r,i);try{n.mkdir(s)}catch{}r=s}}return s},createFile(r,e,t,o,a){var i=E.join2(typeof r=="string"?r:n.getPath(r),e),s=Rr(o,a);return n.create(i,s)},createDataFile(r,e,t,o,a,i){var s=e;r&&(r=typeof r=="string"?r:n.getPath(r),s=e?E.join2(r,e):r);var l=Rr(o,a),f=n.create(s,l);if(t){if(typeof t=="string"){for(var v=new Array(t.length),w=0,y=t.length;w<y;++w)v[w]=t.charCodeAt(w);t=v}n.chmod(f,l|146);var p=n.open(f,577);n.write(p,t,0,t.length,0,i),n.close(p),n.chmod(f,l)}},createDevice(r,e,t,o){var a=E.join2(typeof r=="string"?r:n.getPath(r),e),i=Rr(!!t,!!o);n.createDevice.major||(n.createDevice.major=64);var s=n.makedev(n.createDevice.major++,0);return n.registerDevice(s,{open(l){l.seekable=!1},close(l){var f;(f=o==null?void 0:o.buffer)!=null&&f.length&&o(10)},read(l,f,v,w,y){for(var p=0,c=0;c<w;c++){var d;try{d=t()}catch{throw new n.ErrnoError(29)}if(d===void 0&&p===0)throw new n.ErrnoError(6);if(d==null)break;p++,f[v+c]=d}return p&&(l.node.timestamp=Date.now()),p},write(l,f,v,w,y){for(var p=0;p<w;p++)try{o(f[v+p])}catch{throw new n.ErrnoError(29)}return w&&(l.node.timestamp=Date.now()),p}}),n.mkdev(a,i,s)},forceLoadFile(r){if(r.isDevice||r.isFolder||r.link||r.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{r.contents=Q(r.url),r.usedBytes=r.contents.length}catch{throw new n.ErrnoError(29)}},createLazyFile(r,e,t,o,a){class i{constructor(){this.lengthKnown=!1,this.chunks=[]}get(c){if(!(c>this.length-1||c<0)){var d=c%this.chunkSize,S=c/this.chunkSize|0;return this.getter(S)[d]}}setDataGetter(c){this.getter=c}cacheLength(){var c=new XMLHttpRequest;if(c.open("HEAD",t,!1),c.send(null),!(c.status>=200&&c.status<300||c.status===304))throw new Error("Couldn't load "+t+". Status: "+c.status);var d=Number(c.getResponseHeader("Content-length")),S,B=(S=c.getResponseHeader("Accept-Ranges"))&&S==="bytes",M=(S=c.getResponseHeader("Content-Encoding"))&&S==="gzip",T=1024*1024;B||(T=d);var N=(U,J)=>{if(U>J)throw new Error("invalid range ("+U+", "+J+") or no bytes requested!");if(J>d-1)throw new Error("only "+d+" bytes available! programmer error!");var F=new XMLHttpRequest;if(F.open("GET",t,!1),d!==T&&F.setRequestHeader("Range","bytes="+U+"-"+J),F.responseType="arraybuffer",F.overrideMimeType&&F.overrideMimeType("text/plain; charset=x-user-defined"),F.send(null),!(F.status>=200&&F.status<300||F.status===304))throw new Error("Couldn't load "+t+". Status: "+F.status);return F.response!==void 0?new Uint8Array(F.response||[]):$r(F.responseText||"")},tr=this;tr.setDataGetter(U=>{var J=U*T,F=(U+1)*T-1;if(F=Math.min(F,d-1),typeof tr.chunks[U]>"u"&&(tr.chunks[U]=N(J,F)),typeof tr.chunks[U]>"u")throw new Error("doXHR failed!");return tr.chunks[U]}),(M||!d)&&(T=d=1,d=this.getter(0).length,T=d,Er("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=d,this._chunkSize=T,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!q)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var s=new i,l={isDevice:!1,contents:s}}else var l={isDevice:!1,url:t};var f=n.createFile(r,e,l,o,a);l.contents?f.contents=l.contents:l.url&&(f.contents=null,f.url=l.url),Object.defineProperties(f,{usedBytes:{get:function(){return this.contents.length}}});var v={},w=Object.keys(f.stream_ops);w.forEach(p=>{var c=f.stream_ops[p];v[p]=(...d)=>(n.forceLoadFile(f),c(...d))});function y(p,c,d,S,B){var M=p.node.contents;if(B>=M.length)return 0;var T=Math.min(M.length-B,S);if(M.slice)for(var N=0;N<T;N++)c[d+N]=M[B+N];else for(var N=0;N<T;N++)c[d+N]=M.get(B+N);return T}return v.read=(p,c,d,S,B)=>(n.forceLoadFile(f),y(p,c,d,S,B)),v.mmap=(p,c,d,S,B)=>{n.forceLoadFile(f);var M=qr();if(!M)throw new n.ErrnoError(48);return y(p,A,M,c,d),{ptr:M,allocated:!0}},f.stream_ops=v,f}},b={DEFAULT_POLLMASK:5,calculateAt(r,e,t){if(E.isAbs(e))return e;var o;if(r===-100)o=n.cwd();else{var a=b.getStreamFromFD(r);o=a.path}if(e.length==0){if(!t)throw new n.ErrnoError(44);return o}return E.join2(o,e)},doStat(r,e,t){var o=r(e);g[t>>2]=o.dev,g[t+4>>2]=o.mode,_[t+8>>2]=o.nlink,g[t+12>>2]=o.uid,g[t+16>>2]=o.gid,g[t+20>>2]=o.rdev,k=[o.size>>>0,(m=o.size,+Math.abs(m)>=1?m>0?+Math.floor(m/4294967296)>>>0:~~+Math.ceil((m-+(~~m>>>0))/4294967296)>>>0:0)],g[t+24>>2]=k[0],g[t+28>>2]=k[1],g[t+32>>2]=4096,g[t+36>>2]=o.blocks;var a=o.atime.getTime(),i=o.mtime.getTime(),s=o.ctime.getTime();return k=[Math.floor(a/1e3)>>>0,(m=Math.floor(a/1e3),+Math.abs(m)>=1?m>0?+Math.floor(m/4294967296)>>>0:~~+Math.ceil((m-+(~~m>>>0))/4294967296)>>>0:0)],g[t+40>>2]=k[0],g[t+44>>2]=k[1],_[t+48>>2]=a%1e3*1e3,k=[Math.floor(i/1e3)>>>0,(m=Math.floor(i/1e3),+Math.abs(m)>=1?m>0?+Math.floor(m/4294967296)>>>0:~~+Math.ceil((m-+(~~m>>>0))/4294967296)>>>0:0)],g[t+56>>2]=k[0],g[t+60>>2]=k[1],_[t+64>>2]=i%1e3*1e3,k=[Math.floor(s/1e3)>>>0,(m=Math.floor(s/1e3),+Math.abs(m)>=1?m>0?+Math.floor(m/4294967296)>>>0:~~+Math.ceil((m-+(~~m>>>0))/4294967296)>>>0:0)],g[t+72>>2]=k[0],g[t+76>>2]=k[1],_[t+80>>2]=s%1e3*1e3,k=[o.ino>>>0,(m=o.ino,+Math.abs(m)>=1?m>0?+Math.floor(m/4294967296)>>>0:~~+Math.ceil((m-+(~~m>>>0))/4294967296)>>>0:0)],g[t+88>>2]=k[0],g[t+92>>2]=k[1],0},doMsync(r,e,t,o,a){if(!n.isFile(e.node.mode))throw new n.ErrnoError(43);if(o&2)return 0;var i=X.slice(r,r+t);n.msync(e,i,a,t,o)},getStreamFromFD(r){var e=n.getStreamChecked(r);return e},varargs:void 0,getStr(r){var e=Wr(r);return e}};function Ce(r,e,t,o){try{if(e=b.getStr(e),e=b.calculateAt(r,e),t&-8)return-28;var a=n.lookupPath(e,{follow:!0}),i=a.node;if(!i)return-44;var s="";return t&4&&(s+="r"),t&2&&(s+="w"),t&1&&(s+="x"),s&&n.nodePermissions(i,s)?-2:0}catch(l){if(typeof n>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}function hr(){var r=g[+b.varargs>>2];return b.varargs+=4,r}var Y=hr;function Ue(r,e,t){b.varargs=t;try{var o=b.getStreamFromFD(r);switch(e){case 0:{var a=hr();if(a<0)return-28;for(;n.streams[a];)a++;var i;return i=n.dupStream(o,a),i.fd}case 1:case 2:return 0;case 3:return o.flags;case 4:{var a=hr();return o.flags|=a,0}case 12:{var a=Y(),s=0;return G[a+s>>1]=2,0}case 13:case 14:return 0}return-28}catch(l){if(typeof n>"u"||l.name!=="ErrnoError")throw l;return-l.errno}}function ze(r,e,t){b.varargs=t;try{var o=b.getStreamFromFD(r);switch(e){case 21509:return o.tty?0:-59;case 21505:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcgets){var a=o.tty.ops.ioctl_tcgets(o),i=Y();g[i>>2]=a.c_iflag||0,g[i+4>>2]=a.c_oflag||0,g[i+8>>2]=a.c_cflag||0,g[i+12>>2]=a.c_lflag||0;for(var s=0;s<32;s++)A[i+s+17]=a.c_cc[s]||0;return 0}return 0}case 21510:case 21511:case 21512:return o.tty?0:-59;case 21506:case 21507:case 21508:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tcsets){for(var i=Y(),l=g[i>>2],f=g[i+4>>2],v=g[i+8>>2],w=g[i+12>>2],y=[],s=0;s<32;s++)y.push(A[i+s+17]);return o.tty.ops.ioctl_tcsets(o.tty,e,{c_iflag:l,c_oflag:f,c_cflag:v,c_lflag:w,c_cc:y})}return 0}case 21519:{if(!o.tty)return-59;var i=Y();return g[i>>2]=0,0}case 21520:return o.tty?-28:-59;case 21531:{var i=Y();return n.ioctl(o,e,i)}case 21523:{if(!o.tty)return-59;if(o.tty.ops.ioctl_tiocgwinsz){var p=o.tty.ops.ioctl_tiocgwinsz(o.tty),i=Y();G[i>>1]=p[0],G[i+2>>1]=p[1]}return 0}case 21524:return o.tty?0:-59;case 21515:return o.tty?0:-59;default:return-28}}catch(c){if(typeof n>"u"||c.name!=="ErrnoError")throw c;return-c.errno}}function Be(r,e,t,o){b.varargs=o;try{e=b.getStr(e),e=b.calculateAt(r,e);var a=o?hr():0;return n.open(e,t,a).fd}catch(i){if(typeof n>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function Le(r,e){try{return r=b.getStr(r),b.doStat(n.stat,r,e)}catch(t){if(typeof n>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}var xe=()=>{j("")},je=1,Ie=()=>je,Oe=(r,e,t)=>X.copyWithin(r,e,e+t),Gr;Gr=()=>performance.now();var He=()=>2147483648,We=r=>{var e=sr.buffer,t=(r-e.byteLength+65535)/65536;try{return sr.grow(t),Cr(),1}catch{}},Ve=r=>{var e=X.length;r>>>=0;var t=He();if(r>t)return!1;for(var o=(f,v)=>f+(v-f%v)%v,a=1;a<=4;a*=2){var i=e*(1+.2/a);i=Math.min(i,r+100663296);var s=Math.min(t,o(Math.max(r,i),65536)),l=We(s);if(l)return!0}return!1},Mr={},$e=()=>or||"./this.program",er=()=>{if(!er.strings){var r=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:r,_:$e()};for(var t in Mr)Mr[t]===void 0?delete e[t]:e[t]=Mr[t];var o=[];for(var t in e)o.push(`${t}=${e[t]}`);er.strings=o}return er.strings},qe=(r,e)=>{for(var t=0;t<r.length;++t)A[e++]=r.charCodeAt(t);A[e]=0},Xe=(r,e)=>{var t=0;return er().forEach((o,a)=>{var i=e+t;_[r+a*4>>2]=i,qe(o,i),t+=o.length+1}),0},Ge=(r,e)=>{var t=er();_[r>>2]=t.length;var o=0;return t.forEach(a=>o+=a.length+1),_[e>>2]=o,0},Ke=0,Ye=()=>Se||Ke>0,Je=r=>{var e;lr=r,Ye()||((e=u.onExit)==null||e.call(u,r),_r=!0),ar(r,new Ir(r))},Kr=(r,e)=>{lr=r,Je(r)},Qe=Kr;function Ze(r){try{var e=b.getStreamFromFD(r);return n.close(e),0}catch(t){if(typeof n>"u"||t.name!=="ErrnoError")throw t;return t.errno}}var rt=(r,e,t,o)=>{for(var a=0,i=0;i<t;i++){var s=_[e>>2],l=_[e+4>>2];e+=8;var f=n.read(r,A,s,l,o);if(f<0)return-1;if(a+=f,f<l)break}return a};function et(r,e,t,o){try{var a=b.getStreamFromFD(r),i=rt(a,e,t);return _[o>>2]=i,0}catch(s){if(typeof n>"u"||s.name!=="ErrnoError")throw s;return s.errno}}var tt=(r,e)=>e+2097152>>>0<4194305-!!r?(r>>>0)+e*4294967296:NaN;function nt(r,e,t,o,a){var i=tt(e,t);try{if(isNaN(i))return 61;var s=b.getStreamFromFD(r);return n.llseek(s,i,o),k=[s.position>>>0,(m=s.position,+Math.abs(m)>=1?m>0?+Math.floor(m/4294967296)>>>0:~~+Math.ceil((m-+(~~m>>>0))/4294967296)>>>0:0)],g[a>>2]=k[0],g[a+4>>2]=k[1],s.getdents&&i===0&&o===0&&(s.getdents=null),0}catch(l){if(typeof n>"u"||l.name!=="ErrnoError")throw l;return l.errno}}var ot=(r,e,t,o)=>{for(var a=0,i=0;i<t;i++){var s=_[e>>2],l=_[e+4>>2];e+=8;var f=n.write(r,A,s,l,o);if(f<0)return-1;a+=f}return a};function at(r,e,t,o){try{var a=b.getStreamFromFD(r),i=ot(a,e,t);return _[o>>2]=i,0}catch(s){if(typeof n>"u"||s.name!=="ErrnoError")throw s;return s.errno}}var it=r=>{if(r instanceof Ir||r=="unwind")return lr;ar(1,r)},Yr=r=>{var e=u["_"+r];return e},st=(r,e)=>{A.set(r,e)},Jr=(r,e,t,o,a)=>{var i={string:d=>{var S=0;return d!=null&&d!==0&&(S=Or(d)),S},array:d=>{var S=Pr(d.length);return st(d,S),S}};function s(d){return e==="string"?Wr(d):e==="boolean"?!!d:d}var l=Yr(r),f=[],v=0;if(o)for(var w=0;w<o.length;w++){var y=i[t[w]];y?(v===0&&(v=_e()),f[w]=y(o[w])):f[w]=o[w]}var p=l(...f);function c(d){return v!==0&&ke(v),s(d)}return p=c(p),p},lt=(r,e,t,o)=>{var a=!t||t.every(s=>s==="number"||s==="boolean"),i=e!=="string";return i&&a&&!o?Yr(r):(...s)=>Jr(r,e,t,s)},ut=n.readFile,ft=r=>n.unlink(r),ct=r=>{var e=vr(r)+1,t=Qr(e);return t&&Ar(r,t,e),t},dt=ct;n.createPreloadedFile=Te,n.staticInit(),u.FS_createDataFile=n.createDataFile,u.FS_readFile=n.readFile,u.FS_unlink=n.unlink;var vt={q:Ce,c:Ue,f:ze,g:Be,n:Le,l:xe,i:Ie,j:Oe,h:Gr,m:Ve,o:Xe,p:Ge,a:Qe,d:Ze,e:et,k:nt,b:at},C=Ee(),Qr=u._malloc=r=>(Qr=u._malloc=C.t)(r);u._free=r=>(u._free=C.u)(r);var Zr=u._main=(r,e)=>(Zr=u._main=C.v)(r,e),re=r=>(re=C.x)(r),ee=r=>(ee=C.y)(r),te=()=>(te=C.z)();u.callMain=ne,u.ccall=Jr,u.cwrap=lt,u.setValue=Fe,u.getValue=be,u.stringToUTF8=Ar,u.FS_unlink=ft,u.FS_readFile=ut,u.FS_createDataFile=Xr,u.allocateUTF8=dt;var mr;rr=function r(){mr||oe(),mr||(rr=r)};function ne(r){var e=Zr;r.unshift(or);var t=r.length,o=Pr((t+1)*4),a=o;r.forEach(s=>{_[a>>2]=Or(s),a+=4}),_[a>>2]=0;try{var i=e(t,o);return Kr(i,!0),i}catch(s){return it(s)}}function oe(r=gr){if(O>0||(le(),O>0))return;function e(){var t;mr||(mr=!0,u.calledRun=!0,!_r&&(ue(),fe(),$(u),(t=u.onRuntimeInitialized)==null||t.call(u),ae&&ne(r),ce()))}u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),e()},1)):e()}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();var ae=!1;return u.noInitialRun&&(ae=!1),oe(),V=wr,V}})();let W=null;ht().then(P=>{W=P,self.postMessage({type:"ready"})});self.onerror=function(P,D){self.postMessage({type:"error",message:P,error:D?D.stack:null})};self.onunhandledrejection=function(P){self.postMessage({type:"error",message:P.reason?P.reason.message:"Unhandled rejection",error:P.reason?P.reason.stack:null})};const mt=P=>{try{const D=P.data.blob,V=P.data.cmd,u=P.data.outName||"out.nii";if(!D||V.length<1)throw new Error("Expected a file and at least one command");const $=D.name,L=new FileReader;L.readAsArrayBuffer(D),L.onloadend=function(){const wr=new Uint8Array(L.result);if(W){if(W.FS_createDataFile(".",$,wr,!0,!0),!Array.isArray(V))throw new Error("Expected args to be an array");const pr=W.callMain(V),q=W.FS_readFile(u),I=new Blob([q],{type:"application/sla"});self.postMessage({blob:I,outName:u,exitCode:pr}),W.FS_unlink($),$!==u&&W.FS_unlink(u)}else throw new Error("WASM module not loaded yet!")}}catch(D){self.postMessage({type:"error",message:D.message,error:D.stack})}};self.addEventListener("message",mt,!1);var wt=Object.freeze({__proto__:null});
